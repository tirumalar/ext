GRI.dc=400
GRI.shiftRight=4
GRI.flashTime=4000
MT9P001.global_gain_val=9
GRI.flashAlternate=1
GRI.masterMode=2

# PIXCLK = (EXTCLK * M) / ((N+1)*(P+1))
MT9P001.pll_enable=1
MT9P001.pll_delay=10000
MT9P001.pll_control=81
# This is (m << 8 | n) m = 24, n=1
MT9P001.pll_config1=6145
# This is (p1)
MT9P001.pll_config2=5
MT9P001.output_control=8066

;GRI.EnrollmentEyeDestAddr=192.168.20.110:8081

GRI.IrisIdNumBytes=128
GRI.MatchResultNwMsgType=UID
;GRI.MatchResultNwMsgFormat=
;;GRI.MatchResultDestAddr=192.168.20.2:8091
;GRI.EyeDestAddr=192.168.20.2:8082

;This file uses semicolon for comments which can only be placed at the beginning of a line
;use key=value

;//////////////////////////////////////////////
; GRI parameters
;//////////////////////////////////////////////
;Connection params
GRI.serverAddress=192.168.20.2:8082
GRI.url=/img

;GRI.cameraID can be set any alphanumeric string
GRI.cameraID=1
;msg format GRI.msgFormat=HTTP_POST/XML
GRI.msgFormat=HTTP_POST

GRI.FocusBasedRejection=BlockMax
GRI.FocusBasedRejection.BlockSize=2
GRI.FocusThresh=25000		
GRI.shouldDetectEye=true
GRI.TestImageLevel=0
GRI.socketTimeOutMillis=500
GRI.heartBeatIntervalSecs=1
;The following flag can be made true to log details of detection. It saves the first frame where detection is successful
GRI.shouldLog=false

; //// Heartbeat first line can be commented to disable, second and third lines must remain uncommented!!! ////
;GRI.StatusDestAddr=192.168.20.2:8081
GRI.StatusNwMsgFormat=Alive
GRI.HBFreqInSec=10
GRI.HBDestAddress=nano456-0.local:8081

GRI.HBTimeoutInmilliSec=100
GRI.HBMsgFormat=HEARTBEAT:cameraId="%s"

;/////////////////////////////////////////////////////////////////
; Detection parameters
;/////////////////////////////////////////////////////////////////
GRI.SingleSpecMode=true
GRI.cropWidth=480
GRI.cropHeight=640
GRI.EyeDetectionSpecularityMagnitude=50
GRI.EyeDetectionVarianceThresholdMin=10.0
GRI.EyeDetectionVarianceThresholdMax=0.1
GRI.EyeDetectionSeparation=36
GRI.EyeDetectionSearchX=15
GRI.EyeDetectionSearchY=10
GRI.EyeDetectionSpecularitySize=6
GRI.EyeDetectionMaskRadius=6
GRI.HaarEyeZoom=12

;///////////////////////////////////////////////////////
; Image Dimensions
;////////////////////////////////////////////////////////
FrameSize.width=2592
FrameSize.height=1944

;source.type=MT9P001/MT9V032/ADV7183_PAL/ADV7183_NTSC/TEST
source.type=MT9P001
;source.type=TEST
;test Params: make sure source.type is set to TEST above source.type=TEST
test.fileNamePattern=data/face_%03d.pgm
test.fileCount=1

test.IsEvalBoard=false
GRI.rotate=true

;////////////////////////////////////////////////////////
; Tunable sensor params (use decimal numbers everywhere)
;////////////////////////////////////////////////////////

MT9P001.enable_blc=0
;MT9P001.black_level_target=0  

; rising edge  = 17286 
; falling edge = 16774 
; free running = 16390
MT9P001.read_mode1_val=17286

; GAIN = (((Digital_Gain/8) + 1) * (Analog_Multiplier + 1) * (Analog_Gain/8))
; 16 bit mask
; bits
; 6     | {0:5}  = analog gain (value/8)
; 1     | {6}    = analog multiplier
; 1     | {7}    = reserved
; 7     | {8:14} = digital gain = (1 + value/8) 
;
; (digital,analog_multiplier,analog) = (a*256,b*64,c) 
; (0*256),(0*64),8 = 0 + 0 + 8  = 8
;
; IMPORTANT: This value will be replaced with value in the update script

; mirror should be 0 or 1
MT9P001.mirror_row=1
MT9P001.mirror_column=0

; following should be handled very carefully
;MT9P001.row_start_val=54 
;MT9P001.column_start_val=16 
;MT9P001.row_size_val=1943
;MT9P001.column_size_val=2591 

MT9P001.row_start_val=278
MT9P001.column_start_val=600
MT9P001.row_size_val=1395
MT9P001.column_size_val=1991



;MT9P001.horizontal_blank_val  // Legal values: [0, 4095].
;MT9P001.vertical_blank_val // Legal values: [8, 2047].
;MT9P001.shutter_width_upper_val
MT9P001.shutter_width_lower_val=80
;MT9P001.read_mode2_val
;MT9P001.row_address_mode_val
;MT9P001.column_address_mode_val
;MT9P001.row_bin  //Legal values 0 or 3
;MT9P001.row_skip //Legal values [0,7]
;MT9P001.column_bin //Legal values {0,1,3}
;MT9P001.column_skip // Legal values [0,6]


;////////////////////////////////////////////////////////
; Motion Detection Parameters
;////////////////////////////////////////////////////////
;To enable the Motion detection implementation
GRIMotion.Enable=0
; History of images on which algo will work, number is inclusive of current frame, hence the minimum value for History is 2.
GRIMotion.History=10
; Level on which the algo should work
GRIMotion.Level=4
; The difference threshold value 
GRIMotion.AbsDiffThreshold=50
; Minimum ratio threshold.
GRIMotion.MinRatioMovingFramePixels=0.1
;minimum time difference in millisecond between the frames to be considered for motion detection algorithm
GRIMotion.KeyFrameTimeIntervalMilliSec=0 
; sends the motion address to the specified IP.
GRIMotion.ServerAddress=192.168.20.2:8081

;//////////////////////////////////////////////////////////////////////// MATCHSVR  INI

;//////////////////////////////////////////////
; LED & Authorization
;//////////////////////////////////////////////
GRI.RepeatAuthorizationPeriod=2000
GRI.LEDenable=true
GRI.LED.SendResult=true
GRI.LEDSetStr=Name
GRI.LEDInitial=55
GRI.LEDDetect=35
GRI.LEDMatch=4
GRI.LEDSwitchTimeMs=2500
GRI.DetectLEDTimeSecs=2
GRI.LEDDebug=0
GRI.SilencePeriodAfterMatchMs=2000
;Set this to zero to make Mini a verification device by default
GRISetPinJ5.Initial=14,0

;//////////////////////////////////////////////
; DB File transfer sleep to allow matching
;//////////////////////////////////////////////
GRI.DBSleeptimeInMilliSec=500

;//////////////////////////////////////////////
; Matcher
;//////////////////////////////////////////////
GRI.ResizeType=OpenCV
GRI.ExpectedIrisWidth=200
GRI.ActualIrisWidth=200
GRI.SaveScaledImage=false
GRI.FlushQueueOnMatch=true
;Range (1-12) can be used to specify the range of shift for HDMatcher
GRI.HDMatcherShift=7
;if true, HDMatcher will return with the first eye index whose score is below threshold.It will not check for others if it finds a score below the threshold. 
;GRI.GreedyMatch=true 
;Threshold to compare against the match score to specify match.
GRI.matchScoreThresh=0.30
GRI.useCoarseFineMatch=true
GRI.matchCoarseThresh=0.42
GRI.MatcherFeatureMask=15
GRI.Match.NominalCommonBits=2050

;//////////////////////////////////////////////
; Segmentation
;//////////////////////////////////////////////
GRI.EyeLocationSearchArea.x=230
GRI.EyeLocationSearchArea.y=195
GRI.EyeLocationSearchArea.width=180
GRI.EyeLocationSearchArea.height=90
GRI.minPupilDiameter=20
GRI.maxPupilDiameter=90
GRI.minIrisDiameter=80
GRI.maxIrisDiameter=140

GRI.NwDebug=0

;//////////////////////////////////////////////
; Iris codes
;//////////////////////////////////////////////
GRI.irisCodeDatabaseFile=data/PDB10.bin

;//////////////////////////////////////////////
; F2F
;//////////////////////////////////////////////
GRITrigger.F2FEnable=false
GRITrigger.F2FFreqHz=2000.0
;Specifies the GPIO/HW output flag
GRITrigger.F2FOutput=PIN32-CONJ10
GRITrigger.SilentTimeMillis=1000
;Number of bits to transmit
GRITrigger.F2FNumBytes=0  ; This value must be set to zero when F2FEnable=false
GRITrigger.F2FNumBits=0   ; This value must be set to zero when F2FEnable=false
GRITrigger.F2FDebug=0
GRITrigger.F2FEndState=0

;//////////////////////////////////////////////
; Trigger
;//////////////////////////////////////////////
GRITrigger.enable=false
;Clk1 pulse high time before match
GRITrigger.HighPeriod1uSec=4000
;Clk1 pulse high time after match
GRITrigger.HighPeriod2uSec=4000
;Clk2 pulse high time before generation of Clk1
GRITrigger.C2BeforeC1uSec=2000
;Frequency of Clock
GRITrigger.FreqHz=6.0
;Clock1 output
GRITrigger.IlluminatorOutput1=PIN23-CONJ10
;Clock2 output
GRITrigger.IlluminatorOutput2=PIN30-CONJ10
GRITrigger.SleepHysterisTimeSec=3
GRITrigger.DefaultC1C2=1

;//////////////////////////////////////////////
; Distributed matcher
;//////////////////////////////////////////////

server.port=8081

GRI.HDMatcher.port=8082

;GRI.MaxCorruptBitPercentageEnrollment=33
GRI.HDDebug=0
GRI.MatchMgrDebug=0

GRI.EnableNwHDMatcher=1
GRI.HDMatcherBuffSize=134217728
GRI.HDMatcherID=0
GRI.PCMatcher=1
GRI.EyelockSlave=1

GRI.HDMatcherCount=1
GRI.HDMatcher.0.BuffSize=134217728
GRI.HDMatcher.0.Type=REMOTE
GRI.HDMatcher.0.Address=nano456-0.local:8081

GRI.outQSize=10
GRI.DetectedEyesQueueSize=10
server.inQSize=10
GRI.EyeDispatcherQueueSize=10

;///// Spoof Parameters /////////////////

Eyelock.MaxFramesBeforeSeg=6
Eyelock.MaxDetectedEyesPerFrame=3
Eyelock.SpoofEnable=true
Eyelock.BlackThreshold=75.0f
Eyelock.BlackMinThreshold=-2.0f
Eyelock.EnableBlackLevel=true
Eyelock.EnableAreaFocus=false
Eyelock.EnableSpoofAdaboost=false
Eyelock.EnableCentroidRatio=true

;////////////////////////////////////////////////////
;Extra Loose values for Capping regarding Spoof
;////////////////////////////////////////////////////
Eyelock.irisMinThreshX=300
Eyelock.irisMaxThreshX=360
Eyelock.irisMinThreshRad=85
Eyelock.irisMaxThreshRad=140
Eyelock.SpecCentroidRatioThresholdX=8
Eyelock.SpecCentroidRatioThresholdY=0
Eyelock.MinTrackMatchThresh=-1
;////////////////////////////////////////////////////



